{% extends "layout.html" %}
{% from "helpers/form.html" import render_field %}

{% block body %}
    <h1>Configuration</h1>

    <p>
        (<a href="{{ url_for('RootView:index') }}">Home</a> /
        <a href="{{ url_for('RootView:logout') }}">Logout</a>)
    </p>

    <h2>Withings</h2>

    {% if not withings.is_authenticated %}
        <a href="{{ withings.auth_url }}" target="_blank">Authorize Now</a>
        <form action="{{ url_for('ConfigView:withings_oauth') }}" method="post">
            {{ oauth_verifier_form.hidden_tag() }}
            <dl>
                {{ render_field(oauth_verifier_form.oauth_verifier, placeholder='Paste the verifier here') }}
            </dl>
            <button type="submit">Verify</button>
        </form>
    {% else %}

    <h3>User Info</h3>

    <p><a href="{{ url_for('ConfigView:reload_data', path='withings/user') }}">Reload user info</a></p>
    <ul>
        <li>Carlos Escribano Rey</li>
        <li>Male</li>
        <li>1981-12-19</li>
    </ul>
    {% endif %}

    <p>Other withings settings...</p>

{% endblock %}
